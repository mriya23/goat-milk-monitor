---
interface Props {
	id: string;
	type?: 'line' | 'bar' | 'pie' | 'doughnut' | 'radar' | 'polarArea';
	data: any;
	options?: any;
	height?: string;
}

const { id, type = 'line', data, options = {}, height = '400px' } = Astro.props;
---

<div class="chart-container w-full" style={`height: ${height}`}>
	<canvas id={id}></canvas>
</div>

<script define:vars={{ id, type, data, options }}>
	import('chart.js/auto').then((module) => {
		const Chart = module.default;

		const ctx = document.getElementById(id);
		if (ctx) {
			new Chart(ctx, {
				type: type,
				data: data,
				options: {
					responsive: true,
					maintainAspectRatio: false,
					...options
				}
			});
		}
	});
</script>

<style>
	.chart-container {
		position: relative;
	}
</style>
